# werbach.com - Clean .htaccess
# No WordPress, no password protection

# Default directory index
DirectoryIndex index.html index.htm

# Block common exploit files (compatible with Apache 2.2 and 2.4)
<FilesMatch "\.(php|phtml|php5)$">
  <IfModule mod_authz_core.c>
    Require all denied
  </IfModule>
  <IfModule !mod_authz_core.c>
    Order deny,allow
    Deny from all
  </IfModule>
</FilesMatch>

# Allow specific PHP if ever needed
<FilesMatch "^(index\.php)$">
  <IfModule mod_authz_core.c>
    Require all granted
  </IfModule>
  <IfModule !mod_authz_core.c>
    Order allow,deny
    Allow from all
  </IfModule>
</FilesMatch>

# Custom error pages
ErrorDocument 404 /error.html
ErrorDocument 500 /error.html

# Prevent directory browsing
Options -Indexes

# Enable mod_rewrite for clean URLs if needed
<IfModule mod_rewrite.c>
  RewriteEngine On

  # Force HTTPS
  RewriteCond %{HTTPS} off
  RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

  # SPA fallback: serve index.html for any path that isn't a real file or directory
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^ /index.html [L]
</IfModule>
